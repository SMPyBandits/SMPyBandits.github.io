

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38514290-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Environment.usejoblib module &mdash; SMPyBandits 0.9.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Environment.usenumba module" href="Environment.usenumba.html" />
    <link rel="prev" title="Environment.sortedDistance module" href="Environment.sortedDistance.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SMPyBandits
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html"><em>SMPyBandits</em></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">SMPyBandits modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Arms.html">Arms package</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Environment.html">Environment package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="Environment.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Environment.CollisionModels.html">Environment.CollisionModels module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.Evaluator.html">Environment.Evaluator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.EvaluatorMultiPlayers.html">Environment.EvaluatorMultiPlayers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.EvaluatorSparseMultiPlayers.html">Environment.EvaluatorSparseMultiPlayers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.MAB.html">Environment.MAB module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.Result.html">Environment.Result module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.ResultMultiPlayers.html">Environment.ResultMultiPlayers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.fairnessMeasures.html">Environment.fairnessMeasures module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.memory_consumption.html">Environment.memory_consumption module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.notify.html">Environment.notify module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.plot_Cmu_HOI.html">Environment.plot_Cmu_HOI module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.plotsettings.html">Environment.plotsettings module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.pykov.html">Environment.pykov module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.sortedDistance.html">Environment.sortedDistance module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Environment.usejoblib module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.usenumba.html">Environment.usenumba module</a></li>
<li class="toctree-l4"><a class="reference internal" href="Environment.usetqdm.html">Environment.usetqdm module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Policies.html">Policies package</a></li>
<li class="toctree-l2"><a class="reference internal" href="PoliciesMultiPlayers.html">PoliciesMultiPlayers package</a></li>
<li class="toctree-l2"><a class="reference internal" href="complete_tree_exploration_for_MP_bandits.html">complete_tree_exploration_for_MP_bandits module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">configuration module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_comparing_aggregation_algorithms.html">configuration_comparing_aggregation_algorithms module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_comparing_doubling_algorithms.html">configuration_comparing_doubling_algorithms module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_markovian.html">configuration_markovian module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_multiplayers.html">configuration_multiplayers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_sparse.html">configuration_sparse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_sparse_multiplayers.html">configuration_sparse_multiplayers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="env_client.html">env_client module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html">main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main_multiplayers.html">main_multiplayers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main_multiplayers_more.html">main_multiplayers_more module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main_sparse_multiplayers.html">main_sparse_multiplayers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="policy_server.html">policy_server module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../How_to_run_the_code.html">How to run the code ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PublicationsWithSMPyBandits.html">List of research publications using Lilian Besson‚Äôs SMPyBandits project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Aggregation.html"><strong>Policy aggregation algorithms</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../MultiPlayers.html"><strong>Multi-players simulation environment</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoublingTrick.html"><strong>Doubling Trick for Multi-Armed Bandits</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../SparseBandits.html"><strong>Structure and Sparsity of Stochastic Multi-Armed Bandits</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../NonStationaryBandits.html"><strong>Non-Stationary Stochastic Multi-Armed Bandits</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../API.html">Short documentation of the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../About_parallel_computations.html">About parallel computations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TODO.html">üí• TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plots/README.html">Some illustrations for this project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/README.html">Jupyter Notebooks üìì by Naereen &#64; GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/list.html">List of notebooks for SMPyBandits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Profiling.html">A note on execution times, speed and profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uml_diagrams/README.html">UML diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logs/README.html"><code class="docutils literal notranslate"><span class="pre">logs</span></code> files</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SMPyBandits</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">SMPyBandits modules</a> &raquo;</li>
        
          <li><a href="Environment.html">Environment package</a> &raquo;</li>
        
      <li>Environment.usejoblib module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/Environment.usejoblib.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-Environment.usejoblib">
<span id="environment-usejoblib-module"></span><h1>Environment.usejoblib module<a class="headerlink" href="#module-Environment.usejoblib" title="Permalink to this headline">¬∂</a></h1>
<p>Import Parallel and delayed from joblib, safely.</p>
<dl class="class">
<dt id="Environment.usejoblib.Parallel">
<em class="property">class </em><code class="descclassname">Environment.usejoblib.</code><code class="descname">Parallel</code><span class="sig-paren">(</span><em>n_jobs=None</em>, <em>backend=None</em>, <em>verbose=0</em>, <em>timeout=None</em>, <em>pre_dispatch='2 * n_jobs'</em>, <em>batch_size='auto'</em>, <em>temp_folder=None</em>, <em>max_nbytes='1M'</em>, <em>mmap_mode='r'</em>, <em>prefer=None</em>, <em>require=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">joblib.logger.Logger</span></code></p>
<p>Helper class for readable parallel mapping.</p>
<p>Read more in the <span class="xref std std-ref">User Guide</span>.</p>
<dl class="docutils">
<dt>n_jobs: int, default: None</dt>
<dd>The maximum number of concurrently running jobs, such as the number
of Python worker processes when backend=‚Äùmultiprocessing‚Äù
or the size of the thread-pool when backend=‚Äùthreading‚Äù.
If -1 all CPUs are used. If 1 is given, no parallel computing code
is used at all, which is useful for debugging. For n_jobs below -1,
(n_cpus + 1 + n_jobs) are used. Thus for n_jobs = -2, all
CPUs but one are used.
None is a marker for ‚Äòunset‚Äô that will be interpreted as n_jobs=1
(sequential execution) unless the call is performed under a
parallel_backend context manager that sets another value for
n_jobs.</dd>
<dt>backend: str, ParallelBackendBase instance or None, default: ‚Äòloky‚Äô</dt>
<dd><p class="first">Specify the parallelization backend implementation.
Supported backends are:</p>
<ul class="simple">
<li>‚Äúloky‚Äù used by default, can induce some
communication and memory overhead when exchanging input and
output data with the worker Python processes.</li>
<li>‚Äúmultiprocessing‚Äù previous process-based backend based on
<cite>multiprocessing.Pool</cite>. Less robust than <cite>loky</cite>.</li>
<li>‚Äúthreading‚Äù is a very low-overhead backend but it suffers
from the Python Global Interpreter Lock if the called function
relies a lot on Python objects. ‚Äúthreading‚Äù is mostly useful
when the execution bottleneck is a compiled extension that
explicitly releases the GIL (for instance a Cython loop wrapped
in a ‚Äúwith nogil‚Äù block or an expensive call to a library such
as NumPy).</li>
<li>finally, you can register backends by calling
register_parallel_backend. This will allow you to implement
a backend of your liking.</li>
</ul>
<p class="last">It is not recommended to hard-code the backend name in a call to
Parallel in a library. Instead it is recommended to set soft hints
(prefer) or hard constraints (require) so as to make it possible
for library users to change the backend from the outside using the
parallel_backend context manager.</p>
</dd>
<dt>prefer: str in {‚Äòprocesses‚Äô, ‚Äòthreads‚Äô} or None, default: None</dt>
<dd>Soft hint to choose the default backend if no specific backend
was selected with the parallel_backend context manager. The
default process-based backend is ‚Äòloky‚Äô and the default
thread-based backend is ‚Äòthreading‚Äô.</dd>
<dt>require: ‚Äòsharedmem‚Äô or None, default None</dt>
<dd>Hard constraint to select the backend. If set to ‚Äòsharedmem‚Äô,
the selected backend will be single-host and thread-based even
if the user asked for a non-thread based backend with
parallel_backend.</dd>
<dt>verbose: int, optional</dt>
<dd>The verbosity level: if non zero, progress messages are
printed. Above 50, the output is sent to stdout.
The frequency of the messages increases with the verbosity level.
If it more than 10, all iterations are reported.</dd>
<dt>timeout: float, optional</dt>
<dd>Timeout limit for each task to complete.  If any task takes longer
a TimeOutError will be raised. Only applied when n_jobs != 1</dd>
<dt>pre_dispatch: {‚Äòall‚Äô, integer, or expression, as in ‚Äò3*n_jobs‚Äô}</dt>
<dd>The number of batches (of tasks) to be pre-dispatched.
Default is ‚Äò2*n_jobs‚Äô. When batch_size=‚Äùauto‚Äù this is reasonable
default and the workers should never starve.</dd>
<dt>batch_size: int or ‚Äòauto‚Äô, default: ‚Äòauto‚Äô</dt>
<dd>The number of atomic tasks to dispatch at once to each
worker. When individual evaluations are very fast, dispatching
calls to workers can be slower than sequential computation because
of the overhead. Batching fast computations together can mitigate
this.
The <code class="docutils literal notranslate"><span class="pre">'auto'</span></code> strategy keeps track of the time it takes for a batch
to complete, and dynamically adjusts the batch size to keep the time
on the order of half a second, using a heuristic. The initial batch
size is 1.
<code class="docutils literal notranslate"><span class="pre">batch_size=&quot;auto&quot;</span></code> with <code class="docutils literal notranslate"><span class="pre">backend=&quot;threading&quot;</span></code> will dispatch
batches of a single task at a time as the threading backend has
very little overhead and using larger batch size has not proved to
bring any gain in that case.</dd>
<dt>temp_folder: str, optional</dt>
<dd><p class="first">Folder to be used by the pool for memmapping large arrays
for sharing memory with worker processes. If None, this will try in
order:</p>
<ul class="simple">
<li>a folder pointed by the JOBLIB_TEMP_FOLDER environment
variable,</li>
<li>/dev/shm if the folder exists and is writable: this is a
RAM disk filesystem available by default on modern Linux
distributions,</li>
<li>the default system temporary folder that can be
overridden with TMP, TMPDIR or TEMP environment
variables, typically /tmp under Unix operating systems.</li>
</ul>
<p class="last">Only active when backend=‚Äùloky‚Äù or ‚Äúmultiprocessing‚Äù.</p>
</dd>
<dt>max_nbytes int, str, or None, optional, 1M by default</dt>
<dd>Threshold on the size of arrays passed to the workers that
triggers automated memory mapping in temp_folder. Can be an int
in Bytes, or a human-readable string, e.g., ‚Äò1M‚Äô for 1 megabyte.
Use None to disable memmapping of large arrays.
Only active when backend=‚Äùloky‚Äù or ‚Äúmultiprocessing‚Äù.</dd>
<dt>mmap_mode: {None, ‚Äòr+‚Äô, ‚Äòr‚Äô, ‚Äòw+‚Äô, ‚Äòc‚Äô}</dt>
<dd>Memmapping mode for numpy arrays passed to workers.
See ‚Äòmax_nbytes‚Äô parameter documentation for more details.</dd>
</dl>
<p>This object uses workers to compute in parallel the application of a
function to many different arguments. The main functionality it brings
in addition to using the raw multiprocessing or concurrent.futures API
are (see examples for details):</p>
<ul class="simple">
<li>More readable code, in particular since it avoids
constructing list of arguments.</li>
<li><dl class="first docutils">
<dt>Easier debugging:</dt>
<dd><ul class="first last">
<li>informative tracebacks even when the error happens on
the client side</li>
<li>using ‚Äòn_jobs=1‚Äô enables to turn off parallel computing
for debugging without changing the codepath</li>
<li>early capture of pickling errors</li>
</ul>
</dd>
</dl>
</li>
<li>An optional progress meter.</li>
<li>Interruption of multiprocesses jobs with ‚ÄòCtrl-C‚Äô</li>
<li>Flexible pickling control for the communication to and from
the worker processes.</li>
<li>Ability to use shared memory efficiently with worker
processes for large numpy-based datastructures.</li>
</ul>
<p>A simple example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">sqrt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">joblib</span> <span class="k">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="n">sqrt</span><span class="p">)(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0]</span>
</pre></div>
</div>
<p>Reshaping the output when the function has several return
values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">modf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">joblib</span> <span class="k">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="n">modf</span><span class="p">)(</span><span class="n">i</span><span class="o">/</span><span class="mf">2.</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span>
<span class="go">(0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span>
<span class="go">(0.0, 0.0, 1.0, 1.0, 2.0, 2.0, 3.0, 3.0, 4.0, 4.0)</span>
</pre></div>
</div>
<p>The progress meter: the higher the value of <cite>verbose</cite>, the more
messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">joblib</span> <span class="k">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">10</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="n">sleep</span><span class="p">)(</span><span class="o">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c1">#doctest: +SKIP</span>
<span class="go">[Parallel(n_jobs=2)]: Done   1 tasks      | elapsed:    0.6s</span>
<span class="go">[Parallel(n_jobs=2)]: Done   4 tasks      | elapsed:    0.8s</span>
<span class="go">[Parallel(n_jobs=2)]: Done  10 out of  10 | elapsed:    1.4s finished</span>
</pre></div>
</div>
<p>Traceback example, note how the line of the error is indicated
as well as the values of the parameter passed to the function that
triggered the exception, even though the traceback happens in the
child process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">heapq</span> <span class="k">import</span> <span class="n">nlargest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">joblib</span> <span class="k">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">2</span><span class="p">)(</span><span class="n">delayed</span><span class="p">(</span><span class="n">nlargest</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;abcde&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="c1">#doctest: +SKIP</span>
<span class="go">#...</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">Sub-process traceback:</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">TypeError                                          Mon Nov 12 11:37:46 2012</span>
<span class="go">PID: 12934                                    Python 2.7.3: /usr/bin/python</span>
<span class="go">...........................................................................</span>
<span class="go">/usr/lib/python2.7/heapq.pyc in nlargest(n=2, iterable=3, key=None)</span>
<span class="go">    419         if n &gt;= size:</span>
<span class="go">    420             return sorted(iterable, key=key, reverse=True)[:n]</span>
<span class="go">    421</span>
<span class="go">    422     # When key is none, use simpler decoration</span>
<span class="go">    423     if key is None:</span>
<span class="go">--&gt; 424         it = izip(iterable, count(0,-1))                    # decorate</span>
<span class="go">    425         result = _nlargest(n, it)</span>
<span class="go">    426         return map(itemgetter(0), result)                   # undecorate</span>
<span class="go">    427</span>
<span class="go">    428     # General case, slowest method</span>
<span class="go"> TypeError: izip argument #1 must support iteration</span>
<span class="go">___________________________________________________________________________</span>
</pre></div>
</div>
<p>Using pre_dispatch in a producer/consumer situation, where the
data is generated on the fly. Note how the producer is first
called 3 times before the parallel loop is initiated, and then
called to generate new data on the fly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">sqrt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">joblib</span> <span class="k">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">producer</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Produced </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">yield</span> <span class="n">i</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pre_dispatch</span><span class="o">=</span><span class="s1">&#39;1.5*n_jobs&#39;</span><span class="p">)(</span>
<span class="gp">... </span>               <span class="n">delayed</span><span class="p">(</span><span class="n">sqrt</span><span class="p">)(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">producer</span><span class="p">())</span> <span class="c1">#doctest: +SKIP</span>
<span class="go">Produced 0</span>
<span class="go">Produced 1</span>
<span class="go">Produced 2</span>
<span class="go">[Parallel(n_jobs=2)]: Done 1 jobs     | elapsed:  0.0s</span>
<span class="go">Produced 3</span>
<span class="go">[Parallel(n_jobs=2)]: Done 2 jobs     | elapsed:  0.0s</span>
<span class="go">Produced 4</span>
<span class="go">[Parallel(n_jobs=2)]: Done 3 jobs     | elapsed:  0.0s</span>
<span class="go">Produced 5</span>
<span class="go">[Parallel(n_jobs=2)]: Done 4 jobs     | elapsed:  0.0s</span>
<span class="go">[Parallel(n_jobs=2)]: Done 6 out of 6 | elapsed:  0.0s remaining: 0.0s</span>
<span class="go">[Parallel(n_jobs=2)]: Done 6 out of 6 | elapsed:  0.0s finished</span>
</pre></div>
</div>
<dl class="method">
<dt id="Environment.usejoblib.Parallel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>n_jobs=None</em>, <em>backend=None</em>, <em>verbose=0</em>, <em>timeout=None</em>, <em>pre_dispatch='2 * n_jobs'</em>, <em>batch_size='auto'</em>, <em>temp_folder=None</em>, <em>max_nbytes='1M'</em>, <em>mmap_mode='r'</em>, <em>prefer=None</em>, <em>require=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.__init__" title="Permalink to this definition">¬∂</a></dt>
<dd><dl class="docutils">
<dt>depth: int, optional</dt>
<dd>The depth of objects printed.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.__enter__">
<code class="descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.__enter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.__enter__" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.__exit__">
<code class="descname">__exit__</code><span class="sig-paren">(</span><em>exc_type</em>, <em>exc_value</em>, <em>traceback</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.__exit__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.__exit__" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel._initialize_backend">
<code class="descname">_initialize_backend</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel._initialize_backend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel._initialize_backend" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Build a process or thread pool and return the number of workers</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel._effective_n_jobs">
<code class="descname">_effective_n_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel._effective_n_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel._effective_n_jobs" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel._terminate_backend">
<code class="descname">_terminate_backend</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel._terminate_backend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel._terminate_backend" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel._dispatch">
<code class="descname">_dispatch</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel._dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel._dispatch" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Queue the batch for computing, with or without multiprocessing</p>
<p>WARNING: this method is not thread-safe: it should be only called
indirectly via dispatch_one_batch.</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.dispatch_next">
<code class="descname">dispatch_next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.dispatch_next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.dispatch_next" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Dispatch more data for parallel processing</p>
<p>This method is meant to be called concurrently by the multiprocessing
callback. We rely on the thread-safety of dispatch_one_batch to protect
against concurrent consumption of the unprotected iterator.</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.dispatch_one_batch">
<code class="descname">dispatch_one_batch</code><span class="sig-paren">(</span><em>iterator</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.dispatch_one_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.dispatch_one_batch" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Prefetch the tasks for the next batch and dispatch them.</p>
<p>The effective size of the batch is computed here.
If there are no more jobs to dispatch, return False, else return True.</p>
<p>The iterator consumption and dispatching is protected by the same
lock so calling this function should be thread safe.</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel._print">
<code class="descname">_print</code><span class="sig-paren">(</span><em>msg</em>, <em>msg_args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel._print"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel._print" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Display the message on stout or stderr depending on verbosity</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.print_progress">
<code class="descname">print_progress</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.print_progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.print_progress" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Display the process of the parallel execution only a fraction
of time, controlled by self.verbose.</p>
</dd></dl>

<dl class="attribute">
<dt id="Environment.usejoblib.Parallel.__module__">
<code class="descname">__module__</code><em class="property"> = 'joblib.parallel'</em><a class="headerlink" href="#Environment.usejoblib.Parallel.__module__" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.retrieve">
<code class="descname">retrieve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.retrieve" title="Permalink to this definition">¬∂</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.__call__" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

<dl class="method">
<dt id="Environment.usejoblib.Parallel.__repr__">
<code class="descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#Parallel.__repr__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.Parallel.__repr__" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="Environment.usejoblib.delayed">
<code class="descclassname">Environment.usejoblib.</code><code class="descname">delayed</code><span class="sig-paren">(</span><em>function</em>, <em>check_pickle=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/joblib/parallel.html#delayed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Environment.usejoblib.delayed" title="Permalink to this definition">¬∂</a></dt>
<dd><p>Decorator used to capture the arguments of a function.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Environment.usenumba.html" class="btn btn-neutral float-right" title="Environment.usenumba module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Environment.sortedDistance.html" class="btn btn-neutral float-left" title="Environment.sortedDistance module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Lilian Besson (Naereen)
      <span class="lastupdated">
        Last updated on 11 Oct 2019, 11h.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>